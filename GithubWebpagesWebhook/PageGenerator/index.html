<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Programming Languages</title>
  <style>
    /* Base styles */
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    header {
      padding: 20px;
      text-align: center;
      background-color: #1f2933;
      color: white;
    }

    .content {
      padding: 40px;
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(3, 1fr);
    }
    /* Responsive design for tablets and medium screens */
    @media (max-width: 1024px) {
      .content {
        grid-template-columns: repeat(2, 1fr); /* 2 cards per row */
      }
    }
    /* Responsive design for small screens */
    @media (max-width: 768px) {
      .content {
        grid-template-columns: repeat(1, 1fr); /* 1 card per row */
      }
    }

    /* Card styles */
    .card {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 20px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      overflow: hidden; /* Prevents text from spilling */
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    /* Dark mode card background */
    body.dark-mode .card {
      background-color: #3e4c59;
    }

    /* Card hover effect */
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    /* Title */
    .card-title {
      font-size: 1.2rem;
      margin-bottom: 2px;
      color: #1f2933;
    }

    /* Dark mode title color */
    body.dark-mode .card-title {
      color: #f4f7fc;
    }

    /* Description */
    .card-description {
      font-size: 0.9rem;
      color: #6b7280;
      margin-bottom: 3px;
      line-height: 1.4; /* Improves readability */
      white-space: normal;
    }

    /* Dark mode description color */
    body.dark-mode .card-description {
      color: #d1d5db;
    }

    /* Languages list */
    .card-languages {
      font-size: 0.9rem;
      margin-bottom: 1px;
    }

    /* Last commit message */
    .card-last-commit {
      font-size: 0.9rem;
      color: #6b7280;
      margin-bottom: 1px;
    }

    /* Dark mode last commit message color */
    body.dark-mode .card-last-commit {
      color: #d1d5db;
    }

    /* Link to GitHub */
    .card-link {
      display: inline-block;
      margin-top: auto;
      color: #2563eb;
      text-decoration: none;
      font-weight: bold;
    }

    /* Dark mode link color */
    body.dark-mode .card-link {
      color: #60a5fa;
    }

    .card-title, .card-description, .card-languages, .card-last-commit {
      overflow: hidden;
      white-space: normal !important; /* Allow text to wrap, prevent single-line overflow */
    }

    .language {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.9rem;
      margin: 2px; /* Updated to margin: 5px */
      color: white; /* Text color for better contrast */
    }

    /* Language colors */
    .language-lua {
      background-color: #000080;
    }
    .language-js {
      background-color: #a19112;
    }
    /* JavaScript */
    .language-html {
      background-color: #e34c26;
    }
    /* HTML */
    .language-css {
      background-color: #1572b6;
    }
    /* CSS */
    .language-java {
      background-color: #b07219;
    }
    /* Java */
    .language-python {
      background-color: #3572A5;
    }
    /* Python */
    .language-php {
      background-color: #4F5B93;
    }
    /* PHP */
    .language-ruby {
      background-color: #701516;
    }
    /* Ruby */
    .language-swift {
      background-color: #ff6148;
    }
    /* Swift */
    .language-csharp {
      background-color: #68217a;
    }
    /* C# */
    .language-c {
      background-color: #555555;
    }
    /* C */
    .language-cpp {
      background-color: #f34b7d;
    }
    /* C++ */
    .language-go {
      background-color: #00add8;
    }
    /* Go */
    .language-kotlin {
      background-color: #A97B1B;
    }
    /* Kotlin */
    .language-r {
      background-color: #276DC3;
    }
    /* R */
    .language-scala {
      background-color: #DC322F;
    }
    /* Scala */
    .language-shell {
      background-color: #89e051;
    }
    /* Shell */
    .language-typescript {
      background-color: #007acc;
    }
    /* TypeScript */
    .language-elixir {
      background-color: #6e4f2b;
    }
    /* Elixir */
    .language-erlang {
      background-color: #B83998;
    }
    /* Erlang */
    .language-haskell {
      background-color: #5e5086;
    }
    /* Haskell */
    .language-dart {
      background-color: #00BFFF;
    }
    /* Dart */
    .language-dockerfile {
      background-color: #384d54
    }
    /* Docker */
    .language-powershell {
      background-color: #012456;
    }
    /* Powershell */
    .language-rust {
      background-color: #dea584;
    }
    /* Rust */

    .card-last-commit {
      font-size: 0.9rem;
      color: #6b7280;
      margin: 10px 0;
    }

    body.dark-mode .card-last-commit {
      color: #d1d5db;
    }

    .card-link {
      display: inline-block;
      margin-top: 10px;
      color: #2563eb;
      text-decoration: none;
      text-align: center;
    }

    body.dark-mode .card-link {
      color: #60a5fa;
    }

    /* Light mode - softer colors */
    body.light-mode {
      background-color: #e0e5ec;
      color: #444;
    }

      body.light-mode header {
        background-color: #d3d8e0;
        color: #1f2933;
      }

    /* Dark mode */
    body.dark-mode {
      background-color: #1f2933;
      color: #e2e8f0;
    }

      body.dark-mode header {
        background-color: #3e4c59;
        color: #f4f7fc;
      }

    /* Toggle button container - modern design */
    .mode-toggle-container {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
    }

    /* Toggle switch styles */
    .toggle-switch {
      position: relative;
      width: 50px;
      height: 25px;
      background-color: #d1d5db;
      border-radius: 25px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    body.dark-mode .toggle-switch {
      background-color: #4b5563;
    }

    .toggle-circle {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 21px;
      height: 21px;
      border-radius: 50%;
      background-color: white;
      transition: transform 0.3s ease;
    }

    body.dark-mode .toggle-circle {
      transform: translateX(25px);
    }
  </style>
</head>
<body class="light-mode" onload="setLastCommitMessage()">
  <header>
    <h1>[user-name] Github Pages</h1>
    <h3>Generated using <a target="_blank" href="https://github.com/DutchJavaDev/GithubWebpagesWebhook">GithubWebpagesWebhook</a></h3>
  </header>

  <main>
    <div>
    <h3 style="text-align:center">Last update [last-update]</h3>
    </div>
    <div class="content" id="repoList">
      <!-- Static language cards -->
      [page-content]
    </div>
  </main>

  <div class="mode-toggle-container">
    <div class="toggle-switch" id="toggleButton" aria-label="Toggle light/dark mode">
      <div class="toggle-circle"></div>
    </div>
  </div>

  <script>
    const body = document.body;
    const toggleButton = document.getElementById('toggleButton');
    // Toggle light/dark mode
    toggleButton.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      body.classList.toggle('light-mode');
    });

    function setLastCommitMessage() {
      var messages = document.querySelectorAll('p[data-commit-message]')
      messages.forEach(i => {
        var commitMessage = i.dataset['commitMessage']

        var commitDate = Date.parse(i.dataset['commitDate'])

        if (!commitDate || !commitMessage) {
          i.innerHTML = `The force is broken, contact the developer`
          return;
        }

        var now = new Date()

        var days = Math.round((now - commitDate) / (1000 * 60 * 60 * 24))

        if (days <= 0) {
          i.innerHTML = `${commitMessage} (less than 1 day ago)`
        }
        else {
          if (days == 1) {
            i.innerHTML = `${commitMessage} (1 day ago)`
          }
          else {
            i.innerHTML = `${commitMessage} (${days} days ago)`
          }
        }
      })
    }
  </script>
</body>
</html>
